"""
A collection of instances.
"""

import dataclasses

from board import LabelInvariantBoard


@dataclasses.dataclass
class Instance:
    grid: None
    best: int

    def __post_init__(self):
        self.board = LabelInvariantBoard(self.grid, check=True)


# These boards were retrieved from NRK. Each board was online for 24 hours.
# The "best" attribute is the record solution within the 24 hours the board
# was live on the NRK website.
# https://www.nrk.no/spill/former-1.17105310
NRK_boards = {
    # The boards below are from December 2024
    # The keys are dates
    16: Instance(
        grid=[
            [1, 2, 2, 3, 1, 4, 4],
            [1, 2, 1, 3, 4, 4, 4],
            [2, 4, 4, 4, 1, 3, 1],
            [1, 2, 1, 1, 3, 4, 3],
            [2, 3, 3, 3, 4, 1, 3],
            [3, 2, 4, 2, 4, 4, 4],
            [1, 3, 4, 2, 1, 4, 4],
            [3, 4, 2, 3, 4, 3, 4],
            [1, 3, 4, 1, 4, 1, 4],
        ],
        best=12,
    ),
    19: Instance(
        grid=[
            [1, 1, 2, 3, 1, 4, 2],
            [3, 4, 4, 3, 1, 1, 2],
            [4, 1, 4, 1, 4, 4, 3],
            [1, 2, 4, 3, 3, 1, 4],
            [3, 2, 1, 2, 3, 2, 4],
            [4, 1, 4, 1, 3, 3, 1],
            [1, 1, 1, 1, 1, 4, 3],
            [3, 4, 1, 4, 2, 2, 3],
            [2, 3, 1, 4, 3, 2, 4],
        ],
        best=12,
    ),
    20: Instance(
        grid=[
            [1, 1, 2, 1, 1, 3, 3],
            [2, 2, 2, 4, 4, 1, 2],
            [4, 2, 3, 2, 2, 3, 4],
            [3, 1, 1, 4, 4, 1, 2],
            [1, 4, 4, 2, 3, 1, 2],
            [1, 4, 1, 2, 4, 1, 2],
            [2, 2, 4, 1, 2, 3, 2],
            [2, 3, 1, 1, 4, 4, 4],
            [2, 1, 1, 4, 3, 2, 4],
        ],
        best=11,
    ),
    21: Instance(
        grid=[
            [1, 1, 1, 1, 2, 3, 1],
            [3, 4, 4, 4, 2, 4, 1],
            [4, 1, 1, 3, 2, 1, 2],
            [3, 2, 3, 2, 2, 2, 3],
            [4, 1, 4, 1, 3, 1, 1],
            [2, 3, 3, 2, 4, 1, 3],
            [2, 1, 3, 4, 4, 3, 2],
            [4, 4, 2, 1, 4, 3, 3],
            [1, 3, 4, 2, 1, 3, 1],
        ],
        best=15,
    ),
    22: Instance(
        grid=[
            [1, 2, 1, 3, 4, 3, 4],
            [4, 4, 2, 4, 2, 3, 1],
            [2, 4, 2, 4, 4, 3, 4],
            [2, 1, 2, 2, 3, 2, 4],
            [2, 1, 4, 1, 4, 2, 1],
            [1, 1, 4, 2, 4, 1, 1],
            [1, 4, 1, 2, 2, 4, 1],
            [2, 4, 2, 2, 2, 1, 3],
            [4, 4, 3, 2, 3, 4, 3],
        ],
        best=12,
    ),
    23: Instance(
        grid=[
            [1, 2, 2, 2, 2, 1, 1],
            [1, 3, 4, 2, 4, 1, 1],
            [1, 4, 2, 1, 2, 3, 1],
            [2, 2, 2, 4, 2, 2, 3],
            [4, 1, 1, 4, 1, 4, 4],
            [3, 4, 2, 1, 1, 2, 1],
            [2, 1, 3, 4, 3, 2, 4],
            [2, 2, 1, 1, 3, 2, 4],
            [3, 4, 4, 2, 4, 3, 3],
        ],
        best=13,
    ),
    24: Instance(
        grid=[
            [1, 2, 3, 1, 2, 3, 3],
            [4, 2, 1, 2, 2, 3, 1],
            [1, 2, 1, 3, 4, 4, 1],
            [2, 4, 2, 2, 2, 4, 2],
            [3, 2, 3, 3, 3, 4, 4],
            [2, 4, 2, 2, 3, 2, 4],
            [4, 2, 2, 3, 3, 1, 4],
            [1, 2, 2, 1, 3, 3, 2],
            [4, 2, 3, 4, 1, 1, 4],
        ],
        best=13,
    ),
    25: Instance(
        grid=[
            [1, 2, 1, 2, 1, 3, 3],
            [2, 1, 2, 3, 4, 2, 1],
            [4, 2, 1, 2, 1, 1, 3],
            [2, 4, 2, 2, 1, 2, 1],
            [3, 1, 4, 2, 2, 1, 1],
            [1, 1, 3, 4, 3, 2, 2],
            [3, 3, 3, 2, 3, 3, 1],
            [3, 1, 2, 1, 3, 2, 2],
            [3, 3, 1, 2, 2, 1, 4],
        ],
        best=13,
    ),
    26: Instance(
        grid=[
            [1, 2, 2, 3, 4, 3, 2],
            [4, 3, 1, 2, 1, 1, 2],
            [4, 3, 3, 2, 3, 3, 2],
            [2, 1, 1, 3, 2, 4, 1],
            [2, 1, 2, 4, 4, 2, 3],
            [2, 4, 2, 2, 2, 4, 3],
            [2, 3, 3, 2, 1, 1, 2],
            [1, 3, 1, 3, 4, 1, 3],
            [1, 2, 1, 1, 1, 1, 1],
        ],
        best=12,
    ),
    27: Instance(
        grid=[
            [1, 2, 2, 1, 2, 1, 3],
            [1, 2, 3, 4, 1, 2, 4],
            [4, 2, 2, 3, 2, 4, 2],
            [3, 3, 3, 3, 3, 3, 2],
            [4, 4, 2, 3, 4, 3, 1],
            [2, 4, 4, 2, 2, 4, 4],
            [3, 4, 2, 3, 1, 2, 3],
            [4, 1, 1, 3, 4, 3, 1],
            [2, 3, 3, 1, 3, 3, 1],
        ],
        best=13,
    ),
    28: Instance(
        grid=[
            [1, 2, 3, 4, 3, 2, 1],
            [1, 1, 1, 3, 3, 1, 3],
            [2, 2, 4, 1, 3, 2, 2],
            [1, 4, 4, 4, 2, 3, 1],
            [3, 3, 1, 2, 2, 1, 4],
            [4, 4, 3, 1, 1, 1, 3],
            [4, 1, 1, 4, 2, 3, 1],
            [2, 1, 4, 4, 1, 3, 4],
            [3, 3, 4, 3, 3, 3, 1],
        ],
        best=13,
    ),
    29: Instance(
        grid=[
            [1, 2, 3, 3, 4, 1, 1],
            [4, 4, 4, 1, 1, 2, 1],
            [3, 2, 1, 3, 2, 2, 4],
            [1, 1, 3, 1, 1, 3, 1],
            [4, 4, 2, 2, 3, 3, 4],
            [3, 2, 2, 4, 1, 4, 1],
            [3, 1, 2, 2, 4, 3, 3],
            [1, 3, 4, 3, 1, 3, 3],
            [2, 3, 3, 3, 4, 2, 2],
        ],
        best=16,
    ),
    30: Instance(
        grid=[
            [1, 2, 3, 1, 4, 3, 3],
            [3, 4, 4, 3, 4, 4, 2],
            [2, 3, 4, 2, 1, 3, 4],
            [4, 4, 3, 1, 2, 2, 2],
            [1, 1, 1, 3, 4, 2, 2],
            [3, 1, 4, 3, 4, 1, 3],
            [4, 1, 3, 3, 2, 3, 3],
            [3, 3, 4, 4, 2, 3, 3],
            [1, 1, 2, 2, 4, 4, 4],
        ],
        best=13,
    ),
    # The boards below are from December 2024
    # The keys are dates
    7: Instance(
        grid=[
            [1, 1, 2, 1, 3, 2, 3],
            [4, 2, 2, 4, 2, 2, 3],
            [2, 4, 2, 4, 3, 3, 4],
            [1, 3, 3, 1, 2, 3, 2],
            [1, 4, 1, 4, 1, 2, 4],
            [1, 3, 4, 3, 1, 1, 4],
            [2, 4, 2, 1, 2, 2, 4],
            [3, 1, 3, 4, 2, 4, 1],
            [4, 1, 2, 2, 2, 2, 3],
        ],
        best=15,
    ),
}


# These are example boards that are "hard" to solve. The best solution has
# been verified by running A* with admissible heuristic.
example_boards = [
    Instance(grid=[[1, 1, 2], [2, 3, 1], [4, 2, 2]], best=4),
    Instance(grid=[[1, 2, 2, 1], [3, 2, 4, 4], [2, 1, 1, 2], [3, 4, 3, 1]], best=6),
    Instance(
        grid=[
            [1, 2, 3, 4, 4],
            [4, 1, 2, 3, 1],
            [2, 4, 3, 3, 2],
            [3, 1, 4, 1, 2],
            [3, 1, 2, 2, 1],
        ],
        best=9,
    ),
]
